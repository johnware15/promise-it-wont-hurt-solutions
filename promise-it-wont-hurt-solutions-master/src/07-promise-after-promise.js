var promise = new Promise(function (fulfill, reject) {
    return query.first(second);
  });
    promise.then(first());
      return first();

    promise.then(second());
